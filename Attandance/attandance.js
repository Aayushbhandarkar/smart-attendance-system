  const students = [
            { rollNo: "CES24-301", name: "ADITI AMBADAS BAWANE", photo: "https://ui-avatars.com/api/?name=ADITI+BAWANE&background=random" },
            { rollNo: "CES24-302", name: "AISHWARYA MURLIDHAR SHRIRANGE", photo: "https://ui-avatars.com/api/?name=AISHWARYA+SHRIRANGE&background=random" },
            { rollNo: "CES24-303", name: "ANJALI RAJESH DEOGADE", photo: "https://ui-avatars.com/api/?name=ANJALI+DEOGADE&background=random" },
            { rollNo: "CES24-304", name: "AYESHAPARVEEN JULFEKARALI SAYYED", photo: "https://ui-avatars.com/api/?name=AYESHAPARVEEN+SAYYED&background=random" },
            { rollNo: "CES24-305", name: "BHAGYASHRI SHEKHAR BHOYAR", photo: "https://ui-avatars.com/api/?name=BHAGYASHRI+BHOYAR&background=random" },
            { rollNo: "CES24-306", name: "JANHAVI GHANSHYAM THAOKAR", photo: "https://ui-avatars.com/api/?name=JANHAVI+THAOKAR&background=random" },
            { rollNo: "CES24-307", name: "KALYANI GURUDEV PAL", photo: "https://ui-avatars.com/api/?name=KALYANI+PAL&background=random" },
            { rollNo: "CES24-308", name: "KHUSHABU AJABDAS NIPANE", photo: "https://ui-avatars.com/api/?name=KHUSHABU+NIPANE&background=random" },
            { rollNo: "CES24-309", name: "MANTASHA BAQUAR ALI SAYYED", photo: "https://ui-avatars.com/api/?name=MANTASHA+SAYYED&background=random" },
            { rollNo: "CES24-310", name: "MUSKAN DHANANJAY BANKAR", photo: "https://ui-avatars.com/api/?name=MUSKAN+BANKAR&background=random" },
            { rollNo: "CES24-311", name: "SAKSHI GOURISHANKAR LANIEWAR", photo: "https://ui-avatars.com/api/?name=SAKSHI+LANIEWAR&background=random" },
            { rollNo: "CES24-312", name: "SAKSHI MOHAN NIKHADE", photo: "https://ui-avatars.com/api/?name=SAKSHI+NIKHADE&background=random" },
            { rollNo: "CES24-313", name: "SAYALI GHANSHAM JAUNJARI", photo: "https://ui-avatars.com/api/?name=SAYALI+JAUNJARI&background=random" },
            { rollNo: "CES24-314", name: "SAYALI GHANSHYAM GOTEFODE", photo: "https://ui-avatars.com/api/?name=SAYALI+GOTEFODE&background=random" },
            { rollNo: "CES24-315", name: "SEJAL SANTOSH CHETULE", photo: "https://ui-avatars.com/api/?name=SEJAL+CHETULE&background=random" },
            { rollNo: "CES24-316", name: "SHREENU LILADHAR LANIEWAR", photo: "https://ui-avatars.com/api/?name=SHREENU+LANIEWAR&background=random" },
            { rollNo: "CES24-317", name: "SHREYA BHARATLAL RAHANGDALE", photo: "https://ui-avatars.com/api/?name=SHREYA+RAHANGDALE&background=random" },
            { rollNo: "CES24-318", name: "SIMRAM MAROTI DAHAKE", photo: "https://ui-avatars.com/api/?name=SIMRAM+DAHAKE&background=random" },
            { rollNo: "CES24-319", name: "SUVIDHI YASHWANT KOCHE", photo: "https://ui-avatars.com/api/?name=SUVIDHI+KOCHE&background=random" },
            { rollNo: "CES24-320", name: "VAIDEHI SANJAY GHAWALE", photo: "https://ui-avatars.com/api/?name=VAIDEHI+GHAWALE&background=random" },
            { rollNo: "CES24-321", name: "AYUSH AMOL BHANDARKAR", photo: "https://ui-avatars.com/api/?name=AYUSH+BHANDARKAR&background=random" },
            { rollNo: "CES24-322", name: "AYUSH CHANDRABHOU RAMTEKE", photo: "https://ui-avatars.com/api/?name=AYUSH+RAMTEKE&background=random" },
            { rollNo: "CES24-323", name: "AYUSH MUKESH KAMBLE", photo: "https://ui-avatars.com/api/?name=AYUSH+KAMBLE&background=random" },
            { rollNo: "CES24-324", name: "CHAITANYA FULCHAND SATDEVE", photo: "https://ui-avatars.com/api/?name=CHAITANYA+SATDEVE&background=random" },
            { rollNo: "CES24-325", name: "DHIRAJ MURLIDHAR WANJARI", photo: "https://ui-avatars.com/api/?name=DHIRAJ+WANJARI&background=random" },
            { rollNo: "CES24-326", name: "GAURAV RAMESH DHOBLE", photo: "https://ui-avatars.com/api/?name=GAURAV+DHOBLE&background=random" },
            { rollNo: "CES24-327", name: "KUNAL YASHWANT BISANE", photo: "https://ui-avatars.com/api/?name=KUNAL+BISANE&background=random" },
            { rollNo: "CES24-328", name: "LAKSHMIKANT KISAN DESHMUKH", photo: "https://ui-avatars.com/api/?name=LAKSHMIKANT+DESHMUKH&background=random" },
            { rollNo: "CES24-329", name: "MUKESH LAXMAN NAGRIKAR", photo: "https://ui-avatars.com/api/?name=MUKESH+NAGRIKAR&background=random" },
            { rollNo: "CES24-330", name: "NIKHIL SHILANAND BHUJADE", photo: "https://ui-avatars.com/api/?name=NIKHIL+BHUJADE&background=random" },
            { rollNo: "CES24-331", name: "NILESH SUBHASH THAKRE", photo: "https://ui-avatars.com/api/?name=NILESH+THAKRE&background=random" },
            { rollNo: "CES24-332", name: "PRAJWAL MAHADEV KUMBHALKAR", photo: "https://ui-avatars.com/api/?name=PRAJWAL+KUMBHALKAR&background=random" },
            { rollNo: "CES24-333", name: "PRITAM PREMLAL SANGOLE", photo: "https://ui-avatars.com/api/?name=PRITAM+SANGOLE&background=random" },
            { rollNo: "CES24-334", name: "RUSHIKESH SUNIL DUBEY", photo: "https://ui-avatars.com/api/?name=RUSHIKESH+DUBEY&background=random" },
            { rollNo: "CES24-335", name: "SHUBHAM SEWAK HUME", photo: "https://ui-avatars.com/api/?name=SHUBHAM+HUME&background=random" },
            { rollNo: "CES24-336", name: "SWAPNIL SUNIL GIRHEPUNJE", photo: "https://ui-avatars.com/api/?name=SWAPNIL+GIRHEPUNJE&background=random" },
            { rollNo: "CES24-337", name: "TUSHAR SHIVSHANKAR DESHMUKH", photo: "https://ui-avatars.com/api/?name=TUSHAR+DESHMUKH&background=random" },
            { rollNo: "CES24-338", name: "YASIN YUNUS MRZA", photo: "https://ui-avatars.com/api/?name=YASIN+MRZA&background=random" },
            { rollNo: "CES24-339", name: "ZAIB MOHD RASHID KHAN", photo: "https://ui-avatars.com/api/?name=ZAIB+KHAN&background=random" },
            { rollNo: "CES25-340", name: "Ruchi Chavhan", photo: "https://ui-avatars.com/api/?name=Ruchi+Chavhan&background=random" },
            { rollNo: "CES25-341", name: "Rumaisha Ansari", photo: "https://ui-avatars.com/api/?name=Rumaisha+Ansari&background=random" },
            { rollNo: "CES25-342", name: "Prajakta Agashe", photo: "https://ui-avatars.com/api/?name=Prajakta+Agashe&background=random" },
            { rollNo: "CES25-343", name: "Prachi Walke", photo: "https://ui-avatars.com/api/?name=Prachi+Walke&background=random" },
            { rollNo: "CES25-344", name: "Shrusti Mendhe", photo: "https://ui-avatars.com/api/?name=Shrusti+Mendhe&background=random" }
        ];

        // Sample attendance data
        let attendanceData = [
            { rollNo: "CES24-301", date: "2023-05-15", subject: "daa", status: "present" },
            { rollNo: "CES24-302", date: "2023-05-15", subject: "daa", status: "absent" },
            // Add more sample data as needed
        ];

        // Initialize variables
        let currentSubject = 'daa';
        let currentDate = new Date().toISOString().split('T')[0];
        let filteredStudents = [];
        let currentPage = 1;
        const studentsPerPage = 10;

        // DOM Elements
        const subjectBtns = document.querySelectorAll('.subject-btn');
        const attendanceDate = document.getElementById('attendanceDate');
        const attendanceTable = document.querySelector('#attendanceTable tbody');
        const presentCount = document.getElementById('presentCount');
        const absentCount = document.getElementById('absentCount');
        const leaveCount = document.getElementById('leaveCount');
        const saveBtn = document.getElementById('saveBtn');
        const exportPdfBtn = document.getElementById('exportPdfBtn');
        const exportExcelBtn = document.getElementById('exportExcelBtn');
        const generateReportBtn = document.getElementById('generateReportBtn');
        const bulkActionBtn = document.getElementById('bulkActionBtn');
        const studentSearch = document.getElementById('studentSearch');
        const clearSearch = document.getElementById('clearSearch');
        const showingCount = document.getElementById('showingCount');
        const totalStudents = document.getElementById('totalStudents');
        const currentPageSpan = document.getElementById('currentPage');
        const prevPageBtn = document.getElementById('prevPage');
        const nextPageBtn = document.getElementById('nextPage');
        const reportModal = new bootstrap.Modal(document.getElementById('reportModal'));
        const bulkActionModal = new bootstrap.Modal(document.getElementById('bulkActionModal'));
        const currentDateTime = document.getElementById('currentDateTime');

        // Initialize the application
        function init() {
            // Set today's date
            attendanceDate.value = currentDate;
            
            // Update current date and time
            updateDateTime();
            setInterval(updateDateTime, 60000); // Update every minute
            
            // Load students
            filterStudents();
            renderStudents();
            
            // Event listeners
            subjectBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    subjectBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentSubject = btn.dataset.subject;
                    filterStudents();
                    renderStudents();
                });
            });
            
            attendanceDate.addEventListener('change', (e) => {
                currentDate = e.target.value;
                filterStudents();
                renderStudents();
            });
            
            saveBtn.addEventListener('click', saveAttendance);
            exportPdfBtn.addEventListener('click', exportToPDF);
            exportExcelBtn.addEventListener('click', exportToExcel);
            generateReportBtn.addEventListener('click', generateReport);
            bulkActionBtn.addEventListener('click', showBulkActions);
            studentSearch.addEventListener('input', () => {
                filterStudents();
                renderStudents();
            });
            clearSearch.addEventListener('click', () => {
                studentSearch.value = '';
                filterStudents();
                renderStudents();
            });
            prevPageBtn.addEventListener('click', goToPrevPage);
            nextPageBtn.addEventListener('click', goToNextPage);
            
            // Initialize tooltips
            const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        }

        // Update current date and time display
        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            currentDateTime.textContent = now.toLocaleDateString('en-US', options);
        }

        // Filter students based on search query
        function filterStudents() {
            const searchQuery = studentSearch.value.toLowerCase();
            filteredStudents = students.filter(student => 
                student.name.toLowerCase().includes(searchQuery) || 
                student.rollNo.toLowerCase().includes(searchQuery)
            );
            // Don't reset currentPage here to maintain pagination position
        }

        // Render students for current page
        function renderStudents() {
            attendanceTable.innerHTML = '';
            
            let present = 0;
            let absent = 0;
            let leave = 0;
            
            const startIndex = (currentPage - 1) * studentsPerPage;
            const endIndex = Math.min(startIndex + studentsPerPage, filteredStudents.length);
            const studentsToShow = filteredStudents.slice(startIndex, endIndex);
            
            studentsToShow.forEach((student, index) => {
                const row = document.createElement('tr');
                
                // Find attendance record
                const record = attendanceData.find(r => 
                    r.rollNo === student.rollNo && 
                    r.date === currentDate && 
                    r.subject === currentSubject
                );
                
                const status = record ? record.status : 'absent';
                
                // Update counters
                if (status === 'present') present++;
                else if (status === 'absent') absent++;
                else if (status === 'leave') leave++;
                
                row.innerHTML = `
                    <td>${startIndex + index + 1}</td>
                    <td>
                        <img src="${student.photo}" alt="${student.name}" class="student-photo">
                        <span class="student-name">${student.name}</span><br>
                        <small class="text-muted">${student.rollNo}</small>
                    </td>
                    <td>
                        <span class="status-badge badge-${status}">${status.toUpperCase()}</span>
                    </td>
                    <td>
                        <button class="btn btn-sm present-btn status-btn" data-rollno="${student.rollNo}">
                            <i class="fas fa-check me-1"></i>Present
                        </button>
                        <button class="btn btn-sm absent-btn status-btn" data-rollno="${student.rollNo}">
                            <i class="fas fa-times me-1"></i>Absent
                        </button>
                        <button class="btn btn-sm leave-btn status-btn" data-rollno="${student.rollNo}">
                            <i class="fas fa-clock me-1"></i>Leave
                        </button>
                    </td>
                `;
                
                attendanceTable.appendChild(row);
            });
            
            // Update counters
            presentCount.textContent = present;
            absentCount.textContent = absent;
            leaveCount.textContent = leave;
            
            // Update pagination info
            showingCount.textContent = `${startIndex + 1}-${endIndex}`;
            totalStudents.textContent = filteredStudents.length;
            currentPageSpan.textContent = currentPage;
            
            // Disable/enable pagination buttons
            prevPageBtn.disabled = currentPage === 1;
            nextPageBtn.disabled = endIndex >= filteredStudents.length;
            
            // Add event listeners to status buttons
            document.querySelectorAll('.status-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const rollNo = this.dataset.rollno;
                    const status = this.classList.contains('present-btn') ? 'present' :
                                  this.classList.contains('absent-btn') ? 'absent' : 'leave';
                    updateAttendance(rollNo, status);
                });
            });
        }

        // Update attendance record
        function updateAttendance(rollNo, status) {
            // Find existing record
            const index = attendanceData.findIndex(r => 
                r.rollNo === rollNo && 
                r.date === currentDate && 
                r.subject === currentSubject
            );
            
            if (index >= 0) {
                attendanceData[index].status = status;
            } else {
                attendanceData.push({
                    rollNo,
                    name: students.find(s => s.rollNo === rollNo).name,
                    date: currentDate,
                    subject: currentSubject,
                    status,
                    timestamp: new Date().toISOString()
                });
            }
            
            // Show toast notification
            showToast(`${students.find(s => s.rollNo === rollNo).name} marked as ${status}`, status);
            
            // Reload table but maintain current page
            renderStudents();
        }

        // Show toast notification
        function showToast(message, type) {
            const toastContainer = document.createElement('div');
            toastContainer.className = `toast align-items-center text-white bg-${type === 'present' ? 'success' : type === 'absent' ? 'danger' : 'warning'} border-0 show`;
            toastContainer.setAttribute('role', 'alert');
            toastContainer.setAttribute('aria-live', 'assertive');
            toastContainer.setAttribute('aria-atomic', 'true');
            
            toastContainer.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body">
                        <i class="fas ${type === 'present' ? 'fa-check-circle' : type === 'absent' ? 'fa-times-circle' : 'fa-clock'} me-2"></i>
                        ${message}
                    </div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
            `;
            
            document.body.appendChild(toastContainer);
            
            // Remove toast after 3 seconds
            setTimeout(() => {
                toastContainer.classList.remove('show');
                setTimeout(() => toastContainer.remove(), 300);
            }, 3000);
        }

        // Save attendance
        function saveAttendance() {
            // In a real app, you would save to a database
            // For this demo, we'll show a toast
            showToast(`Attendance saved for ${getSubjectName(currentSubject)} on ${formatDate(currentDate)}`, 'success');
            console.log('Attendance data:', attendanceData);
        }

        // Export to PDF
        function exportToPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add title
            doc.setFontSize(18);
            doc.text(`Attendance Report - ${getSubjectName(currentSubject)}`, 105, 15, { align: 'center' });
            
            // Add date
            doc.setFontSize(12);
            doc.text(`Date: ${formatDate(currentDate)}`, 14, 25);
            
            // Add institute info
            doc.setFontSize(12);
            doc.text(`Manoharbhai Patel Institute of Engineering and Technology`, 14, 35);
            doc.text(`Department: Computer Engineering - Semester 6`, 14, 40);
            
            // Add table headers
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('Roll No.', 14, 55);
            doc.text('Student Name', 50, 55);
            doc.text('Status', 140, 55);
            
            // Add table data
            doc.setFont(undefined, 'normal');
            let y = 65;
            filteredStudents.forEach(student => {
                const record = attendanceData.find(r => 
                    r.rollNo === student.rollNo && 
                    r.date === currentDate && 
                    r.subject === currentSubject
                );
                const status = record ? record.status : 'absent';
                
                doc.text(student.rollNo, 14, y);
                doc.text(student.name, 50, y);
                doc.text(status.toUpperCase(), 140, y);
                
                y += 7;
                if (y > 280) {
                    doc.addPage();
                    y = 20;
                }
            });
            
            // Add summary
            doc.setFontSize(12);
            doc.setFont(undefined, 'bold');
            doc.text('Summary', 14, y + 10);
            doc.setFont(undefined, 'normal');
            doc.text(`Total Students: ${filteredStudents.length}`, 14, y + 20);
            doc.text(`Present: ${presentCount.textContent}`, 14, y + 27);
            doc.text(`Absent: ${absentCount.textContent}`, 14, y + 34);
            doc.text(`Leave: ${leaveCount.textContent}`, 14, y + 41);
            
            // Save the PDF
            doc.save(`Attendance_${getSubjectName(currentSubject)}_${currentDate}.pdf`);
            
            showToast('PDF exported successfully!', 'success');
        }

        // Export to Excel
        function exportToExcel() {
            // Prepare data
            const data = [
                ['Roll No.', 'Student Name', 'Status', 'Date', 'Subject', 'Institute']
            ];
            
            filteredStudents.forEach(student => {
                const record = attendanceData.find(r => 
                    r.rollNo === student.rollNo && 
                    r.date === currentDate && 
                    r.subject === currentSubject
                );
                const status = record ? record.status : 'absent';
                
                data.push([
                    student.rollNo,
                    student.name,
                    status.toUpperCase(),
                    currentDate,
                    getSubjectName(currentSubject),
                    "Manoharbhai Patel Institute of Engineering and Technology"
                ]);
            });
            
            // Create worksheet
            const ws = XLSX.utils.aoa_to_sheet(data);
            
            // Create workbook
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "Attendance");
            
            // Export to file
            XLSX.writeFile(wb, `Attendance_${getSubjectName(currentSubject)}_${currentDate}.xlsx`);
            
            showToast('Excel file exported successfully!', 'success');
        }

        // Generate report
        function generateReport() {
            // Update report modal content
            document.getElementById('reportSubject').textContent = getSubjectName(currentSubject);
            document.getElementById('reportDate').textContent = formatDate(currentDate);
            
            // Show modal
            reportModal.show();
            
            // Initialize chart
            const ctx = document.getElementById('attendanceChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Present', 'Absent', 'Leave'],
                    datasets: [{
                        data: [
                            parseInt(presentCount.textContent),
                            parseInt(absentCount.textContent),
                            parseInt(leaveCount.textContent)
                        ],
                        backgroundColor: [
                            '#2ecc71',
                            '#e74c3c',
                            '#f39c12'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        }
                    }
                }
            });
        }

        // Show bulk actions modal
        function showBulkActions() {
            document.getElementById('affectedStudentsCount').textContent = filteredStudents.length;
            bulkActionModal.show();
        }

        // Pagination functions
        function goToPrevPage() {
            if (currentPage > 1) {
                currentPage--;
                renderStudents();
            }
        }

        function goToNextPage() {
            if ((currentPage * studentsPerPage) < filteredStudents.length) {
                currentPage++;
                renderStudents();
            }
        }

        // Helper functions
        function getSubjectName(subjectCode) {
            const subjects = {
                daa: 'Design and Analysis of Algorithms',
                hci: 'Human Computer Interaction',
                tcpip: 'TCP/IP Networking',
                dwm: 'Data Warehousing and Mining',
                ee: 'Energy Engineering'
            };
            return subjects[subjectCode] || subjectCode.toUpperCase();
        }

        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        // Start the app
        document.addEventListener('DOMContentLoaded', init);
 